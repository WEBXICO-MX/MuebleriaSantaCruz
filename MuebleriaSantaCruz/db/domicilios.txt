if exists (select 1
   from sys.sysreferences r join sys.sysobjects o on (o.id = r.constid and o.type = 'F')
   where r.fkeyid = object_id('domicilios') and o.name = 'FK_DOMICILI_REFERENCE_PERSONAS')
alter table domicilios
   drop constraint FK_DOMICILI_REFERENCE_PERSONAS
go

if exists (select 1
   from sys.sysreferences r join sys.sysobjects o on (o.id = r.constid and o.type = 'F')
   where r.fkeyid = object_id('domicilios') and o.name = 'FK_DOMICILI_REFERENCE_ASENTAMI')
alter table domicilios
   drop constraint FK_DOMICILI_REFERENCE_ASENTAMI
go

if exists (select 1
            from  sysobjects
           where  id = object_id('domicilios')
            and   type = 'U')
   drop table domicilios
go

/*==============================================================*/
/* Table: domicilios                                            */
/*==============================================================*/
create table domicilios (
   id                   int                  not null,
   persona_id           int                  null,
   asentamiento_id      int                  null,
   calle                varchar(100)         null,
   numero_interior      varchar(50)          null,
   numero_exterior      varchar(50)          null,
   referencias          varchar(100)         null,
   fecha_registro       datetime             null,
   activo               bit                  null,
   constraint PK_DOMICILIOS primary key (id)
)
go

alter table domicilios
   add constraint FK_DOMICILI_REFERENCE_PERSONAS foreign key (persona_id)
      references personas (id)
go

alter table domicilios
   add constraint FK_DOMICILI_REFERENCE_ASENTAMI foreign key (asentamiento_id)
      references asentamientos (id)
go
